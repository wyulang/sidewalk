(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{288:function(e,t,s){"use strict";function r(e,t,s,r,i,n,o,c){var a,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=s,l._compiled=!0),r&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=a):i&&(a=c?function(){i.call(this,this.$root.$options.shadowRoot)}:i),a)if(l.functional){l._injectStyles=a;var u=l.render;l.render=function(e,t){return a.call(t),u(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,a):[a]}return{exports:e,options:l}}s.d(t,"a",function(){return r})},289:function(e,t,s){"use strict";var r=s(1),i=s(125).filter;r({target:"Array",proto:!0,forced:!s(126)("filter")},{filter:function(e,t){return i(this,e,1<arguments.length?t:void 0)}})},290:function(e,t,s){var r=s(1),i=s(7);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:s(186)})},291:function(e,t,s){var r=s(1),i=s(4),n=s(14),o=s(47).f,c=s(7),a=i(function(){o(1)});r({target:"Object",stat:!0,forced:!c||a,sham:!c},{getOwnPropertyDescriptor:function(e,t){return o(n(e),t)}})},292:function(e,t,s){var r=s(1),i=s(7),a=s(185),l=s(14),u=s(47),f=s(73);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,s,r=l(e),i=u.f,n=a(r),o={},c=0;n.length>c;)void 0!==(s=i(r,t=n[c++]))&&f(o,t,s);return o}})},293:function(e,t,s){var r=s(7),i=s(9).f,n=Function.prototype,o=n.toString,c=/^\s*function ([^ (]*)/;!r||"name"in n||i(n,"name",{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(e){return""}}})},297:function(e,t,s){"use strict";var r=s(1),i=s(125).find,n=s(128),o="find",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r({target:"Array",proto:!0,forced:c},{find:function(e,t){return i(this,e,1<arguments.length?t:void 0)}}),n(o)},434:function(e,t,s){"use strict";s.r(t);function r(){var s=this,e=s.$createElement,r=s._self._c||e;return r("div",{staticClass:"w-all"},[r("el-form",{ref:"ruleForm",staticClass:"pt30 fs-13 pl10",attrs:{model:s.user,rules:s.rules,"label-width":"100px"}},[r("div",{staticClass:"ml10 mb20"},[s._v("* 请务必正确填写全部信息")]),r("el-form-item",{attrs:{label:"学生姓名：",prop:"name"}},[r("el-input",{staticClass:"w-250",model:{value:s.user.name,callback:function(e){s.$set(s.user,"name",e)},expression:"user.name"}})],1),r("el-form-item",{attrs:{label:"性别：",prop:"name"}},[r("div",{staticClass:"flex-line"},s._l(s.sexList,function(t,e){return r("div",{key:e,staticClass:"flex-line hand ai-c mr15",class:{"jb-fc":t.select,"fc-666":!t.select},on:{click:function(e){s.sexList.forEach(function(e){e.select=!1}),t.select=!0}}},[r("span",{staticClass:"iconfont fs-20  ",class:{iconradioboxmarked:t.select,iconradiobuttonoff:!t.select}}),r("span",{staticClass:"ml5 fs-14"},[s._v(s._s(t.name))])])}),0)]),r("el-form-item",{attrs:{label:"民族：",prop:"name"}},[r("div",{staticClass:"flex-line"},s._l(s.nationList,function(t,e){return r("div",{key:e,staticClass:"flex-line hand ai-c mr15",class:{"jb-fc":t.select,"fc-666":!t.select},on:{click:function(e){s.nationList.forEach(function(e){e.select=!1}),t.select=!0}}},[r("span",{staticClass:"iconfont fs-20  ",class:{iconradioboxmarked:t.select,iconradiobuttonoff:!t.select}}),r("span",{staticClass:"ml5 fs-14"},[s._v(s._s(t.name))])])}),0)]),r("el-form-item",{attrs:{label:"年级：",prop:"name"}},[r("div",{staticClass:"flex-line"},s._l(s.classList,function(t,e){return r("div",{key:e,staticClass:"flex-line hand ai-c mr15",class:{"jb-fc":t.select,"fc-666":!t.select},on:{click:function(e){s.classList.forEach(function(e){e.select=!1}),t.select=!0}}},[r("span",{staticClass:"iconfont fs-20  ",class:{iconradioboxmarked:t.select,iconradiobuttonoff:!t.select}}),r("span",{staticClass:"ml5 fs-14"},[s._v(s._s(t.name))])])}),0)]),r("el-form-item",{attrs:{label:"电话：",prop:"mailPhone"}},[r("el-input",{staticClass:"w-250",attrs:{maxlength:"11",placeholder:"请输入电话"},model:{value:s.user.mailPhone,callback:function(e){s.$set(s.user,"mailPhone",e)},expression:"user.mailPhone"}})],1),r("el-form-item",{attrs:{label:"所在学校："}},[r("el-select",{ref:"rescity",staticClass:"w-100 mr5",attrs:{placeholder:"请选择"},on:{change:function(e){s.getAddress(e,"area")}},model:{value:s.user.cityId,callback:function(e){s.$set(s.user,"cityId",e)},expression:"user.cityId"}},s._l(s.cityList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{ref:"resArea",staticClass:"w-120 mr5",attrs:{placeholder:"请选择"},on:{change:function(e){s.getAddress(e,"school")}},model:{value:s.user.districtId,callback:function(e){s.$set(s.user,"districtId",e)},expression:"user.districtId"}},s._l(s.districtList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{ref:"resSchool",attrs:{placeholder:"请选择"},model:{value:s.user.schoolId,callback:function(e){s.$set(s.user,"schoolId",e)},expression:"user.schoolId"}},s._l(s.schoolList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),-1==s.user.schoolId?r("el-input",{staticClass:"w-250 mt10",attrs:{placeholder:"请输入您的学校名称"},model:{value:s.user.highschool,callback:function(e){s.$set(s.user,"highschool",e)},expression:"user.highschool"}}):s._e()],1),r("el-form-item",[r("div",{staticClass:"jb-btn mt10",on:{click:function(e){return s.submitForm("ruleForm")}}},[s._v("保 存")])])],1),r("div",{staticClass:"h-20"})],1)}r._withStripped=!0;s(32),s(289),s(297),s(183),s(75),s(293),s(193),s(290),s(31),s(291),s(292),s(127),s(187),s(184),s(130);var i=s(74);function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(s,!0).forEach(function(e){c(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var a={computed:o({},Object(i.mapState)(["userinfo"])),data:function(){return{sexList:[{name:"男",value:1,select:!1},{name:"女",value:0,select:!1}],nationList:[{name:"汉族",value:1,select:!1},{name:"少数民族",value:2,select:!1}],classList:[{name:"高一",value:1,select:!1},{name:"高二",value:2,select:!1},{name:"高三",value:3,select:!1}],user:{address:"",provinceId:34,cityId:null,districtId:null,highschool:"",name:"",schoolId:"",sex:"",mailPhone:"",studentClass:"",nation:1},rules:{name:[{required:!0,message:"请输入您的名字",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],studentClass:[{required:!0,message:"请选择年级",trigger:"change"}],schoolId:[{required:!0,message:"请选择学校",trigger:"change"}],mailPhone:[{required:!0,validator:function(e,t,s){if(!t)return s(new Error("手机号不能为空"));var r=/^1[3|4|5|7|8][0-9]\d{8}$/;if(console.log(r.test(t)),!r.test(t))return s(new Error("请输入正确的手机号"));s()},trigger:"blur"}]},provinceList:[{id:34,name:"浙江"}],cityList:[],districtList:[],schoolList:[],isShowNav:!1}},methods:o({},Object(i.mapActions)(["getProvinceList","getCityList","getDistrictList","getHighschoolList","getInfoSave","getUserInfo"]),{submitForm:function(e){var t=this;-1==this.user.schoolId&&this.user.highschool.length<2?this.$message.error("请输入学校名称"):(this.user.sex=this.sexList.find(function(e){return e.select})&&this.sexList.find(function(e){return e.select}).value,this.user.nation=this.nationList.find(function(e){return e.select})&&this.nationList.find(function(e){return e.select}).value,this.user.studentClass=this.classList.find(function(e){return e.select})&&this.classList.find(function(e){return e.select}).value,/^[\u4e00-\u9fa5]+$/.test(this.user.name)?/^1(3|4|5|7|8)\d{9}$/.test(this.user.mailPhone)?[0,1].includes(parseInt(this.user.sex))?[1,2,3].includes(parseInt(this.user.studentClass))?this.user.schoolId||-1==this.user.schoolId?(-1==this.user.schoolId?this.user.schoolId="":this.user.highschool="",this.$refs[e].validate(function(e){if(!e)return!1;t.user.schoolId=-1==t.user.schoolId?null:t.user.schoolId,t.getInfoSave(t.user).then(function(e){2e4==e.code&&(2==t.userinfo.sex?(Object.assign(t.userinfo,t.user),t.userinfo.sex=2):Object.assign(t.userinfo,t.user),t.$store.commit("setUserinfo",t.userinfo),0==t.userinfo.examType&&t.$router.push({name:"user-rank",query:{sex:t.isShowNav}}),t.$message.success("保存成功！！"),t.user.schoolId||(t.user.schoolId=-1))})})):this.$message.error("请选择所在学校"):this.$message.error("请选择年级"):this.$message.error("请选择性别"):this.$message.error("您输入的手机号格试有误"):this.$message.error("请输入中文姓名"))},resetForm:function(e){this.$refs[e].resetFields()},getAddress:function(e,t,s){var r=this;"city"==t?this.getCityList({provinceId:34}).then(function(e){2e4==e.code&&(r.cityList=e.data.array)}):"area"==t?(this.districtList=[],this.getDistrictList({cityId:e}).then(function(e){2e4==e.code&&(s||(r.user.districtId="",r.user.schoolId=""),r.districtList=e.data.array,r.$refs.resSchool.value="",r.$refs.resSchool.selectedLabel="",r.$refs.resArea.value="",r.$refs.resArea.selectedLabel="")})):"school"==t&&(this.schoolList=[],this.getHighschoolList({districtId:e}).then(function(e){2e4==e.code&&(s||(r.user.schoolId=""),r.schoolList=e.data.array,r.schoolList.push({id:-1,name:"其他学校"}),r.$refs.resSchool.value="",r.$refs.resSchool.selectedLabel="")}))},getUser:function(){var t=this;this.getUserInfo().then(function(e){t.isShowNav=t.userinfo.sex,t.user.address=t.userinfo.address,t.user.sex=t.userinfo.sex,t.user.name=t.userinfo.name,t.user.mailPhone=t.userinfo.mailPhone||t.userinfo.phone,t.user.studentClass=t.userinfo.studentClass,t.user.cityId=t.userinfo.cityId||"",t.user.nation=parseInt(t.userinfo.nation||1),t.user.highschool=t.userinfo.highschool||"",0<t.sexList.filter(function(e){return e.value==t.user.sex}).length&&(t.sexList.find(function(e){return e.value==t.user.sex}).select=!0),0<t.nationList.filter(function(e){return e.value==t.user.nation}).length&&(t.nationList.find(function(e){return e.value==t.user.nation}).select=!0),0<t.classList.filter(function(e){return e.value==t.user.studentClass}).length&&(t.classList.find(function(e){return e.value==t.user.studentClass}).select=!0),t.userinfo.cityId&&(t.getAddress(t.user.cityId,"area","no"),t.user.districtId=t.userinfo.districtId||""),t.userinfo.districtId&&(t.getAddress(t.user.districtId,"school","no"),setTimeout(function(){e.data.highschool?t.user.schoolId=-1:t.user.schoolId=t.userinfo.schoolId},500))})}}),created:function(){this.getAddress("","city"),this.getUser()}},l=s(288),u=Object(l.a)(a,r,[],!1,null,null,null);u.options.__file="src/client/zjexam/pages/user/info.vue";t.default=u.exports}}]);